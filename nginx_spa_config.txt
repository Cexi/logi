# === CONFIGURACIÓN NGINX PARA REACT SPA ===
# Añadir esto en Plesk → Apache & nginx Settings → Additional nginx directives

# Servir assets estáticos
location /static/ {
    alias /var/www/vhosts/loginexia.com/fleet.loginexia.com/static/;
}

location /assets/ {
    alias /var/www/vhosts/loginexia.com/fleet.loginexia.com/static/assets/;
}

# API routes - enviar al backend
location /api/ {
    proxy_pass http://127.0.0.1:5000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}

location /health {
    proxy_pass http://127.0.0.1:5000;
}

# Todas las demás rutas - servir React
location / {
    try_files $uri $uri/ /static/spa.html;
}

# Específicamente para las rutas de React
location ~ ^/(login|dashboard|riders|deliveries|analytics|alerts|settings|profile)$ {
    try_files /static/spa.html =404;
}
